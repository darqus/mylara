import{d as q,r as v,a as D,e as b,f as r,P as g,p as n,q as e,s,D as c,ag as S,H as k,S as w,T as f,L as h,x as y,R as V,a1 as A,y as P,V as B,aa as z,af as I,K as p,W as L,a4 as N,U as R,a0 as U}from"./vendor-4cnWJq__.js";import{g as Q}from"./admin-config.service-PhUJWde6.js";import{f as W}from"./firestore.service-DVoyk11_.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./firebase-vendor-DF-ErlKL.js";import"./index-CK2exzeq.js";const T={key:0,class:"text-center q-py-lg"},E={key:1,class:"row q-gutter-md"},H={class:"text-h4 text-weight-bold"},K={class:"text-body2 text-grey-6"},M=q({name:"AdminStatsWidget",__name:"AdminStatsWidget",setup($){const d=v(!0),u=v([]);D(async()=>{await _()});async function _(){d.value=!0;try{const l=Q().map(async a=>{const x=await W.getCollection(a.name);return{name:a.name,label:a.label,icon:a.icon,color:m(a.name),count:x.items.length}});u.value=await Promise.all(l)}finally{d.value=!1}}function m(i){const l=["primary","secondary","accent","positive","negative","info","warning"],a=i.length%l.length;return l[a]??"primary"}return(i,l)=>(r(),b(g,null,{default:n(()=>[e(f,null,{default:n(()=>[l[1]||(l[1]=s("div",{class:"text-h6 q-mb-md"}," Статистика коллекций ",-1)),d.value?(r(),c("div",T,[e(S,{color:"primary",size:"2em"}),l[0]||(l[0]=s("div",{class:"q-mt-md text-grey-6"}," Загрузка статистики... ",-1))])):(r(),c("div",E,[(r(!0),c(k,null,w(u.value,a=>(r(),c("div",{key:a.name,class:"col-12 col-sm-6 col-md-4"},[e(g,{class:"text-center q-pa-md",bordered:"",flat:""},{default:n(()=>[e(h,{color:a.color,name:a.icon,class:"q-mb-sm",size:"32px"},null,8,["color","name"]),s("div",H,y(a.count),1),s("div",K,y(a.label),1)]),_:2},1024)]))),128))]))]),_:1,__:[1]})]),_:1}))}}),j={class:"row q-gutter-md"},G={class:"text-h6"},J={class:"text-body2 text-grey-6"},O={class:"row q-gutter-md"},X=q({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup($){const d=V(),u=A(),_=Q(),m=v(!1),i=v("");function l(C){u.push(`/admin/collection/${C}`)}function a(){d.notify({type:"positive",message:"Данные обновлены",position:"top"})}function x(){if(!i.value.trim()){d.notify({type:"negative",message:"Введите название коллекции",position:"top"});return}d.notify({type:"info",message:`Создание коллекции "${i.value}" (в разработке)`,position:"top"}),m.value=!1,i.value=""}return(C,t)=>(r(),b(U,{class:"q-pa-md"},{default:n(()=>[t[5]||(t[5]=s("div",{class:"text-h4 q-mb-md"}," Панель администратора ",-1)),t[6]||(t[6]=s("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),e(M,{class:"q-mb-lg"}),s("div",j,[(r(!0),c(k,null,w(P(_),o=>(r(),c("div",{key:o.name,class:"col-12 col-sm-6 col-md-4"},[B((r(),b(g,{class:"admin-card cursor-pointer",clickable:"",onClick:Y=>l(o.name)},{default:n(()=>[e(f,{class:"text-center"},{default:n(()=>[e(h,{name:o.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),s("div",G,y(o.label),1),s("div",J," Управление записями "+y(o.label.toLowerCase()),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[z]])]))),128))]),e(I,{class:"q-my-lg"}),t[7]||(t[7]=s("div",{class:"text-h6 q-mb-md"}," Быстрые действия ",-1)),s("div",O,[e(p,{color:"primary",icon:"add",label:"Создать коллекцию",onClick:t[0]||(t[0]=o=>m.value=!0)}),e(p,{color:"secondary",icon:"refresh",label:"Обновить данные",onClick:a})]),e(L,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=o=>m.value=o)},{default:n(()=>[e(g,{style:{"min-width":"400px"}},{default:n(()=>[e(f,null,{default:n(()=>t[4]||(t[4]=[s("div",{class:"text-h6"}," Создать новую коллекцию ",-1)])),_:1,__:[4]}),e(f,{class:"q-pt-none"},{default:n(()=>[e(N,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),label:"Название коллекции",placeholder:"Введите название коллекции",filled:""},null,8,["modelValue"])]),_:1}),e(R,{align:"right",class:"text-primary"},{default:n(()=>[e(p,{label:"Отмена",flat:"",onClick:t[2]||(t[2]=o=>m.value=!1)}),e(p,{label:"Создать",flat:"",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[5,6,7]}))}}),oe=F(X,[["__scopeId","data-v-5158d40b"]]);export{oe as default};
