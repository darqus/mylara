import{d as b,a9 as x,c as B,X as T,f as u,e as f,aa as q,Z as D,p as t,s as e,B as N,ab as g,ac as w,S as c,v as _,ad as S,a4 as R,V as F,r as H,w as M,b as P,H as $,G as z,y,K as E,q as O,T as h,ae as U,x as d,af as G,ag as J,ah as K,A as Q,F as W,z as X,I as Z,J as j}from"./vendor-BWNmmB4S.js";import{u as Y,b as ee}from"./index-rpi7im6s.js";import{g as te}from"./admin-config.service-B9kxW-MT.js";import"./firebase-vendor-CJeZ2BEb.js";const p=b({name:"AdminMenuItem",__name:"AdminMenuItem",props:{title:{},icon:{},link:{}},setup(v){const a=v,i=x(),o=B(()=>a.link==="/"&&i.path==="/"||a.link==="/admin"&&i.path==="/admin"?!0:a.link.includes("/admin/collection/")?i.path===a.link:a.link!=="/"&&a.link!=="/admin"?i.path.startsWith(a.link):!1);return(l,k)=>T((u(),f(q,{active:o.value,class:D([{"admin-menu-item--active":o.value},"admin-menu-item"]),to:l.link,"active-class":"text-primary bg-primary-1",clickable:""},{default:t(()=>[e(g,{avatar:""},{default:t(()=>[e(N,{name:l.icon},null,8,["name"])]),_:1}),e(g,null,{default:t(()=>[e(w,null,{default:t(()=>[c(_(l.title),1)]),_:1})]),_:1})]),_:1},8,["active","class","to"])),[[S]])}}),ae={key:0,class:"q-mr-md text-caption"},ne={class:"q-ml-md"},re=b({name:"AdminLayout",__name:"AdminLayout",setup(v){const a=R(),i=F(),{currentUser:o,isAuthenticated:l,logout:k}=Y(),m=H(!1),A=ee,C=te();M(()=>l.value,r=>{r||a.push("/admin/login")},{immediate:!0});function L(){m.value=!m.value}async function V(){const r=await k();r.success?(i.notify({type:"positive",message:"Выход выполнен успешно",position:"top"}),a.push("/admin/login")):i.notify({type:"negative",message:r.error??"Произошла ошибка при выходе",position:"top"})}return(r,n)=>{const I=P("router-view");return u(),f(j,{view:"lHh Lpr lFf"},{default:t(()=>[e($,{elevated:""},{default:t(()=>[e(z,null,{default:t(()=>[e(h,{"aria-label":"Menu",icon:"menu",dense:"",flat:"",round:"",onClick:L}),e(U,null,{default:t(()=>n[1]||(n[1]=[c("Админка")])),_:1,__:[1]}),d(o)?(u(),y("div",ae,_(d(o).email),1)):E("",!0),e(h,{icon:"logout",dense:"",flat:"",round:"",onClick:V},{default:t(()=>[e(G,null,{default:t(()=>n[2]||(n[2]=[c("Выйти")])),_:1,__:[2]})]),_:1}),O("div",ne,"Версия "+_(d(A)),1)]),_:1})]),_:1}),e(J,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=s=>m.value=s),color:"primary",style:{"border-right":"1px solid var(--q-primary)"},"show-if-above":""},{default:t(()=>[e(K,null,{default:t(()=>[e(w,{header:""},{default:t(()=>n[3]||(n[3]=[c("Управление данными")])),_:1,__:[3]}),e(p,{icon:"o_settings",link:"/admin",title:"На главную Админки"}),e(Q),(u(!0),y(W,null,X(d(C),s=>(u(),f(p,{key:s.name,icon:s.icon,link:`/admin/collection/${s.name}`,title:s.label},null,8,["icon","link","title"]))),128)),e(Q),e(p,{icon:"o_home",link:"/",title:"На главную Лендинга"})]),_:1})]),_:1},8,["modelValue"]),e(Z,null,{default:t(()=>[e(I)]),_:1})]),_:1})}}});export{re as default};
