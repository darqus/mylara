import{d as b,r as x,a as w,V as k,e as c,p as d,a3 as q,a4 as D,f as o,q as r,y as p,F as Q,z as B,x as f,Z as P,C as S,s as g,D as $,B as R,v,ai as y,aa as z}from"./vendor-CqOrBQm9.js";import{g as A}from"./admin-config.service-D0X7YxHh.js";import{firestoreService as F}from"./firestore.service-DPblDChT.js";import"./firebase-vendor-Dt--ACjN.js";import"./index-CBE16f4_.js";function V(s){const n=s%10,l=s%100;return l>=11&&l<=14?"записей":n===1?"запись":n>=2&&n<=4?"записи":"записей"}function L(s){return`${s} ${V(s)}`}const N={class:"row q-gutter-md"},T={class:"text-h6"},E={class:"text-body2 text-grey-6 q-mb-sm"},I={class:"q-mt-md"},J=b({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup(s){const n=k(),l=D(),u=A(),m=x({});w(async()=>{await _()});async function _(){try{const a=u.map(async e=>{const i=await F.getCollection(e.name);return{name:e.name,count:i.items.length}}),t=await Promise.all(a);m.value=t.reduce((e,i)=>(e[i.name]=i.count,e),{})}catch(a){console.error("Ошибка загрузки статистики коллекций:",a),n.notify({type:"negative",message:"Ошибка загрузки статистики",position:"top"})}}function h(a){const t=["primary","secondary","accent","positive","negative","info","warning"],e=a.length%t.length;return t[e]??"primary"}function C(a){l.push(`/admin/collection/${a}`)}return(a,t)=>(o(),c(q,{class:"q-pa-md"},{default:d(()=>[t[0]||(t[0]=r("div",{class:"text-h4 q-mb-md"},"Панель администратора",-1)),t[1]||(t[1]=r("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),r("div",N,[(o(!0),p(Q,null,B(f(u),e=>(o(),p("div",{key:e.name,class:"col-12 col-sm-6 col-md-3"},[P((o(),c(S,{class:"admin-dashboard__card cursor-pointer",clickable:"",onClick:i=>C(e.name)},{default:d(()=>[g($,{class:"text-center"},{default:d(()=>[g(R,{name:e.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),r("div",T,v(e.label),1),r("div",E," Управление записями "+v(e.label.toLowerCase()),1),r("div",I,[m.value[e.name]!==void 0?(o(),c(y,{key:0,color:h(e.name),label:f(L)(m.value[e.name]??0),"text-color":"white",dense:""},null,8,["color","label"])):(o(),c(y,{key:1,color:"grey-5",label:"Загрузка...","text-color":"white",dense:""}))])]),_:2},1024)]),_:2},1032,["onClick"])),[[z]])]))),128))])]),_:1,__:[0,1]}))}});export{J as default};
