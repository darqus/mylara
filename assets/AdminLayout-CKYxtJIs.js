import{d as w,a6 as V,c as B,V as D,f as r,e as p,a7 as I,p as t,q as e,L as x,a8 as k,a9 as b,J as m,x as f,aa as T,a1 as q,R as N,r as R,w as S,b as H,A as M,z as $,D as g,E,s as F,K as Q,ab as U,y as c,ac as z,ad as J,ae as K,H as O,S as P,af as W,B as j,C as G}from"./vendor-4cnWJq__.js";import{u as X}from"./index-siJsLMxG.js";import{g as Y}from"./admin-config.service-PhUJWde6.js";import"./firebase-vendor-DF-ErlKL.js";const y=w({name:"AdminMenuItem",__name:"AdminMenuItem",props:{title:{},icon:{},link:{}},setup(_){const a=_,o=V(),u=B(()=>a.link==="/"&&o.path==="/"?!0:a.link.includes("/admin/collection/")?o.path===a.link:o.path.startsWith(a.link)&&a.link!=="/");return(s,v)=>D((r(),p(I,{active:u.value,to:s.link,"active-class":"text-primary bg-grey-2",clickable:""},{default:t(()=>[e(k,{avatar:""},{default:t(()=>[e(x,{name:s.icon},null,8,["name"])]),_:1}),e(k,null,{default:t(()=>[e(b,null,{default:t(()=>[m(f(s.title),1)]),_:1})]),_:1})]),_:1},8,["active","to"])),[[T]])}}),Z={key:0,class:"q-mr-md text-caption"},ee="1.0.0",le=w({name:"AdminLayout",__name:"AdminLayout",setup(_){const a=q(),o=N(),{currentUser:u,isAuthenticated:s,logout:v}=X(),d=R(!1),h=Y();S(()=>s.value,i=>{i||a.push("/admin/login")},{immediate:!0});function A(){d.value=!d.value}async function L(){const i=await v();i.success?(o.notify({type:"positive",message:"Выход выполнен успешно",position:"top"}),a.push("/admin/login")):o.notify({type:"negative",message:i.error??"Произошла ошибка при выходе",position:"top"})}return(i,n)=>{const C=H("router-view");return r(),p(G,{view:"lHh Lpr lFf"},{default:t(()=>[e(M,{elevated:""},{default:t(()=>[e($,null,{default:t(()=>[e(Q,{"aria-label":"Menu",icon:"menu",dense:"",flat:"",round:"",onClick:A}),e(U,null,{default:t(()=>n[1]||(n[1]=[m(" Админка ")])),_:1,__:[1]}),c(u)?(r(),g("div",Z,f(c(u).email),1)):E("",!0),e(Q,{icon:"logout",dense:"",flat:"",round:"",onClick:L},{default:t(()=>[e(z,null,{default:t(()=>n[2]||(n[2]=[m("Выйти")])),_:1,__:[2]})]),_:1}),F("div",{class:"q-ml-md"}," Версия "+f(ee))]),_:1})]),_:1}),e(J,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=l=>d.value=l),bordered:"","show-if-above":""},{default:t(()=>[e(K,null,{default:t(()=>[e(b,{header:""},{default:t(()=>n[3]||(n[3]=[m(" Управление данными ")])),_:1,__:[3]}),(r(!0),g(O,null,P(c(h),l=>(r(),p(y,{key:l.name,icon:l.icon,link:`/admin/collection/${l.name}`,title:l.label},null,8,["icon","link","title"]))),128)),e(W),e(y,{icon:"home",link:"/",title:"На главную"})]),_:1})]),_:1},8,["modelValue"]),e(j,null,{default:t(()=>[e(C)]),_:1})]),_:1})}}});export{le as default};
