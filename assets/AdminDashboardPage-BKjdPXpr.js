import{j as q,r as v,D,k as x,m as i,n,p as e,q as s,E as c,Q as S,H as k,L as Q,K as w,t as g,a6 as V,u as A,M as P,ad as B,J as p}from"./index-Bft1CDkT.js";import{Q as _,a as f,c as z,b as I,d as L}from"./QDialog-CbtRF0Hz.js";import{g as h,Q as N}from"./admin-config.service-B3FDEn5L.js";import{Q as E}from"./QInput-BhRGu6_f.js";import{e as F}from"./use-quasar-tCW0iFlD.js";import{f as M}from"./firestore.service-CtM74yWs.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-timeout-CXTqsQYR.js";const U={key:0,class:"text-center q-py-lg"},W={key:1,class:"row q-gutter-md"},j={class:"text-h4 text-weight-bold"},H={class:"text-body2 text-grey-6"},J=q({name:"AdminStatsWidget",__name:"AdminStatsWidget",setup($){const d=v(!0),u=v([]);D(async()=>{await y()});async function y(){d.value=!0;try{const o=h().map(async a=>{const b=await M.getCollection(a.name);return{name:a.name,label:a.label,icon:a.icon,color:m(a.name),count:b.items.length}});u.value=await Promise.all(o)}finally{d.value=!1}}function m(r){const o=["primary","secondary","accent","positive","negative","info","warning"],a=r.length%o.length;return o[a]??"primary"}return(r,o)=>(i(),x(_,null,{default:n(()=>[e(f,null,{default:n(()=>[o[1]||(o[1]=s("div",{class:"text-h6 q-mb-md"}," Статистика коллекций ",-1)),d.value?(i(),c("div",U,[e(S,{color:"primary",size:"2em"}),o[0]||(o[0]=s("div",{class:"q-mt-md text-grey-6"}," Загрузка статистики... ",-1))])):(i(),c("div",W,[(i(!0),c(k,null,Q(u.value,a=>(i(),c("div",{key:a.name,class:"col-12 col-sm-6 col-md-4"},[e(_,{class:"text-center q-pa-md",bordered:"",flat:""},{default:n(()=>[e(w,{color:a.color,name:a.icon,class:"q-mb-sm",size:"32px"},null,8,["color","name"]),s("div",j,g(a.count),1),s("div",H,g(a.label),1)]),_:2},1024)]))),128))]))]),_:1,__:[1]})]),_:1}))}}),K={class:"row q-gutter-md"},T={class:"text-h6"},G={class:"text-body2 text-grey-6"},O={class:"row q-gutter-md"},X=q({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup($){const d=F(),u=V(),y=h(),m=v(!1),r=v("");function o(C){u.push(`/admin/collection/${C}`)}function a(){d.notify({type:"positive",message:"Данные обновлены",position:"top"})}function b(){if(!r.value.trim()){d.notify({type:"negative",message:"Введите название коллекции",position:"top"});return}d.notify({type:"info",message:`Создание коллекции "${r.value}" (в разработке)`,position:"top"}),m.value=!1,r.value=""}return(C,t)=>(i(),x(L,{class:"q-pa-md"},{default:n(()=>[t[5]||(t[5]=s("div",{class:"text-h4 q-mb-md"}," Панель администратора ",-1)),t[6]||(t[6]=s("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),e(J,{class:"q-mb-lg"}),s("div",K,[(i(!0),c(k,null,Q(A(y),l=>(i(),c("div",{key:l.name,class:"col-12 col-sm-6 col-md-4"},[P((i(),x(_,{class:"admin-card cursor-pointer",clickable:"",onClick:Y=>o(l.name)},{default:n(()=>[e(f,{class:"text-center"},{default:n(()=>[e(w,{name:l.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),s("div",T,g(l.label),1),s("div",G," Управление записями "+g(l.label.toLowerCase()),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])]))),128))]),e(N,{class:"q-my-lg"}),t[7]||(t[7]=s("div",{class:"text-h6 q-mb-md"}," Быстрые действия ",-1)),s("div",O,[e(p,{color:"primary",icon:"add",label:"Создать коллекцию",onClick:t[0]||(t[0]=l=>m.value=!0)}),e(p,{color:"secondary",icon:"refresh",label:"Обновить данные",onClick:a})]),e(z,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l)},{default:n(()=>[e(_,{style:{"min-width":"400px"}},{default:n(()=>[e(f,null,{default:n(()=>t[4]||(t[4]=[s("div",{class:"text-h6"}," Создать новую коллекцию ",-1)])),_:1,__:[4]}),e(f,{class:"q-pt-none"},{default:n(()=>[e(E,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),label:"Название коллекции",placeholder:"Введите название коллекции",filled:""},null,8,["modelValue"])]),_:1}),e(I,{align:"right",class:"text-primary"},{default:n(()=>[e(p,{label:"Отмена",flat:"",onClick:t[2]||(t[2]=l=>m.value=!1)}),e(p,{label:"Создать",flat:"",onClick:b})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[5,6,7]}))}}),re=R(X,[["__scopeId","data-v-5158d40b"]]);export{re as default};
