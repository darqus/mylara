import{d as O,a9 as b,c as w,Z as R,aa as M,e as _,f as d,ab as S,W as V,p as t,s as e,B as E,ac as I,ad as h,S as p,v,r as x,w as B,J as P,a4 as q,V as F,b as H,H as $,G,y as A,K as U,q as z,T as y,ae as W,x as i,af as X,ag as J,ah as K,A as N,F as Z,z as j,I as Y}from"./vendor-CqOrBQm9.js";import{R as a,u as ee,b as te}from"./index-CBE16f4_.js";import{g as ae}from"./admin-config.service-D0X7YxHh.js";import"./firebase-vendor-Dt--ACjN.js";const f=O({name:"AdminMenuItem",__name:"AdminMenuItem",props:{title:{},icon:{},link:{}},setup(g){const n=g,l=b(),r=w(()=>n.link===String(a.ROOT)&&l.path===String(a.ROOT)||n.link===String(a.ADMIN)&&l.path===String(a.ADMIN)?!0:n.link.includes(a.ADMIN_COLLECTION_PREFIX)?l.path===n.link:n.link!==String(a.ROOT)&&n.link!==String(a.ADMIN)?l.path.startsWith(n.link):!1);return(u,k)=>R((d(),_(S,{active:r.value,class:V([{"admin-menu-item--active":r.value},"admin-menu-item"]),to:u.link,"active-class":"text-primary bg-primary-1",clickable:""},{default:t(()=>[e(I,{avatar:""},{default:t(()=>[e(E,{name:u.icon},null,8,["name"])]),_:1}),e(I,null,{default:t(()=>[e(h,null,{default:t(()=>[p(v(u.title),1)]),_:1})]),_:1})]),_:1},8,["active","class","to"])),[[M]])}}),ne={key:0,class:"q-mr-md text-caption"},se={class:"q-ml-md"},ue=O({name:"AdminLayout",__name:"AdminLayout",setup(g){const n=q(),l=F(),{currentUser:r,isAuthenticated:u,logout:k}=ee(),c=x(!1),L=te,Q=ae();B(()=>u.value,m=>{m||n.push(a.ADMIN_LOGIN)},{immediate:!0});function T(){c.value=!c.value}async function C(){const m=await k();m.success?(l.notify({type:"positive",message:"Выход выполнен успешно",position:"top"}),n.push(a.ADMIN_LOGIN)):l.notify({type:"negative",message:m.error??"Произошла ошибка при выходе",position:"top"})}return(m,s)=>{const D=H("router-view");return d(),_(P,{view:"lHh Lpr lFf"},{default:t(()=>[e($,{elevated:""},{default:t(()=>[e(G,null,{default:t(()=>[e(y,{"aria-label":"Menu",icon:"menu",dense:"",flat:"",round:"",onClick:T}),e(W,null,{default:t(()=>s[1]||(s[1]=[p("Админка")])),_:1,__:[1]}),i(r)?(d(),A("div",ne,v(i(r).email),1)):U("",!0),e(y,{icon:"logout",dense:"",flat:"",round:"",onClick:C},{default:t(()=>[e(X,null,{default:t(()=>s[2]||(s[2]=[p("Выйти")])),_:1,__:[2]})]),_:1}),z("div",se,"Версия "+v(i(L)),1)]),_:1})]),_:1}),e(J,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),color:"primary",style:{"border-right":"1px solid var(--q-primary)"},"show-if-above":""},{default:t(()=>[e(K,null,{default:t(()=>[e(h,{header:""},{default:t(()=>s[3]||(s[3]=[p("Управление данными")])),_:1,__:[3]}),e(f,{link:i(a).ADMIN,icon:"o_settings",title:"На главную Админки"},null,8,["link"]),e(N),(d(!0),A(Z,null,j(i(Q),o=>(d(),_(f,{key:o.name,icon:o.icon,link:`${i(a).ADMIN_COLLECTION_PREFIX}${o.name}`,title:o.label},null,8,["icon","link","title"]))),128)),e(N),e(f,{link:i(a).ROOT,icon:"o_home",title:"На главную Лендинга"},null,8,["link"])]),_:1})]),_:1},8,["modelValue"]),e(Y,null,{default:t(()=>[e(D)]),_:1})]),_:1})}}});export{ue as default};
