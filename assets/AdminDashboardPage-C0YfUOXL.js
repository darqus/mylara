import{d as b,V as x,a4 as w,r as k,a as q,e as c,f as o,p as d,q as r,y as p,F as D,z as Q,x as f,X as B,C as P,s as g,D as S,B as $,v,ai as y,ad as R,a3 as z}from"./vendor-BWNmmB4S.js";import{g as A}from"./admin-config.service-B9kxW-MT.js";import{firestoreService as F}from"./firestore.service-D68vO_aL.js";import"./firebase-vendor-CJeZ2BEb.js";import"./index-rpi7im6s.js";function V(a){const n=a%10,l=a%100;return l>=11&&l<=14?"записей":n===1?"запись":n>=2&&n<=4?"записи":"записей"}function L(a){return`${a} ${V(a)}`}const N={class:"row q-gutter-md"},T={class:"text-h6"},E={class:"text-body2 text-grey-6 q-mb-sm"},I={class:"q-mt-md"},J=b({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup(a){const n=x(),l=w(),u=A(),m=k({});q(async()=>{await _()});async function _(){try{const s=u.map(async e=>{const i=await F.getCollection(e.name);return{name:e.name,count:i.items.length}}),t=await Promise.all(s);m.value=t.reduce((e,i)=>(e[i.name]=i.count,e),{})}catch(s){console.error("Ошибка загрузки статистики коллекций:",s),n.notify({type:"negative",message:"Ошибка загрузки статистики",position:"top"})}}function h(s){const t=["primary","secondary","accent","positive","negative","info","warning"],e=s.length%t.length;return t[e]??"primary"}function C(s){l.push(`/admin/collection/${s}`)}return(s,t)=>(o(),c(z,{class:"q-pa-md"},{default:d(()=>[t[0]||(t[0]=r("div",{class:"text-h4 q-mb-md"},"Панель администратора",-1)),t[1]||(t[1]=r("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),r("div",N,[(o(!0),p(D,null,Q(f(u),e=>(o(),p("div",{key:e.name,class:"col-12 col-sm-6 col-md-3"},[B((o(),c(P,{class:"admin-dashboard__card cursor-pointer",clickable:"",onClick:i=>C(e.name)},{default:d(()=>[g(S,{class:"text-center"},{default:d(()=>[g($,{name:e.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),r("div",T,v(e.label),1),r("div",E," Управление записями "+v(e.label.toLowerCase()),1),r("div",I,[m.value[e.name]!==void 0?(o(),c(y,{key:0,color:h(e.name),label:f(L)(m.value[e.name]??0),"text-color":"white",dense:""},null,8,["color","label"])):(o(),c(y,{key:1,color:"grey-5",label:"Загрузка...","text-color":"white",dense:""}))])]),_:2},1024)]),_:2},1032,["onClick"])),[[R]])]))),128))])]),_:1,__:[0,1]}))}});export{J as default};
