import{C as a,D as e,h as t,g as l,E as o,c as s}from"./quasar-vendor-BxWwGQLB.js";import{d as r,r as d,o as n,f as i,b as u,e as p,p as y,w as c,h as v,x as m,F as f,t as g,l as x}from"./vue-vendor-BCHFu1Z4.js";const h={key:0},$={key:0,class:"q-my-md"},k={key:0},T={class:"text-h6 q-mt-md text-secondary"},_=r({__name:"DataLoader",props:{error:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyText:{default:"Нет доступных данных"},errorText:{default:"Произошла ошибка при загрузке данных"},loadingText:{default:""},fetchData:{type:Function,default:()=>Promise.resolve({})},dataKey:{default:""}},emits:["retry","data-loaded"],setup(r,{emit:_}){const w=r,b=_,q=d(!1),D=d(""),E=d(null),j=async()=>{q.value=!0,D.value="";try{const a=await w.fetchData();E.value=""!==w.dataKey&&"object"==typeof a&&null!==a?a[w.dataKey]:a,b("data-loaded",E.value)}catch(a){D.value=a instanceof Error?a.message:"Произошла ошибка при загрузке данных"}finally{q.value=!1}},B=()=>{j(),b("retry")};return n((()=>{j()})),(r,d)=>(u(),i(f,null,[p(a,{showing:r.loading||q.value},{default:c((()=>[v("div",null,[m(r.$slots,"loading",{},(()=>[p(e,{color:"primary",size:"40px"}),r.loadingText?(u(),i("div",h,g(r.$props.loadingText),1)):y("",!0)]))])])),_:3},8,["showing"]),r.loading||q.value||!r.error&&!D.value?y("",!0):(u(),i("div",$,[m(r.$slots,"error",{},(()=>[p(o,{class:"bg-negative text-white",rounded:""},{avatar:c((()=>[p(l,{name:"error"})])),action:c((()=>[p(t,{color:"white",label:"Попробовать снова",flat:"",onClick:B})])),default:c((()=>[x(" "+g(D.value||r.$props.errorText)+" ",1)])),_:1})]))])),r.loading||q.value||r.error||D.value?y("",!0):(u(),i(f,{key:1},[r.$props.isEmpty||!E.value&&!r.$slots.content?m(r.$slots,"empty",{key:1},(()=>[p(s,{class:"q-pa-md"},{default:c((()=>[p(l,{color:"grey-6",name:"o_info",size:"4em"}),v("div",T,g(r.$props.emptyText),1),p(t,{class:"q-mt-md",color:"primary",label:"Обновить",outline:"",onClick:B})])),_:1})])):m(r.$slots,"content",{key:0,data:E.value},(()=>[E.value?(u(),i("div",k,g(E.value),1)):y("",!0)]))],64))],64))}});export{_};
