import{c as q,g as z,i as j,e as y,l as me,ag as ge,d as l,h as c,C as x,a_ as ve,a$ as he,P as J,x as ye,r as P,w as I,o as be,T as V,ar as ke}from"./index-Dv7iRb9i.js";import{a as qe,b as xe,f as we,u as Ce,h as pe,l as Be,d as _e,m as Se,i as Ee,j as Fe,k as Te,o as $e}from"./use-quasar-B7cg2p2u.js";import{u as Pe}from"./use-timeout-Bw-UEUPx.js";const Oe=q({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:i}}=z(),n=j(me,y);if(n===y)return console.error("QPage needs to be a deep child of QLayout"),y;if(j(ge,y)===y)return console.error("QPage needs to be child of QPageContainer"),y;const u=l(()=>{const s=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const r=n.isContainer.value===!0?n.containerHeight.value:i.screen.height;return e.styleFn(s,r)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-s+"px":i.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":i.screen.height-s+"px"}}),d=l(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>c("main",{class:d.value,style:u.value},x(a.default))}}),je=q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:a}){const i=l(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>c(e.tag,{class:i.value},x(a.default))}}),Ie=q({name:"QCard",props:{...qe,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:a}){const{proxy:{$q:i}}=z(),n=xe(e,i),v=l(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>c(e.tag,{class:v.value},x(a.default))}}),Ve=q({name:"QCardActions",props:{...ve,vertical:Boolean},setup(e,{slots:a}){const i=he(e),n=l(()=>`q-card__actions ${i.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>c("div",{class:n.value},x(a.default))}}),m=[];let b;function ze(e){b=e.keyCode===27}function Qe(){b===!0&&(b=!1)}function De(e){b===!0&&(b=!1,ye(e,27)===!0&&m[m.length-1](e))}function N(e){window[e]("keydown",ze),window[e]("blur",Qe),window[e]("keyup",De),b=!1}function He(e){J.is.desktop===!0&&(m.push(e),m.length===1&&N("addEventListener"))}function W(e){const a=m.indexOf(e);a!==-1&&(m.splice(a,1),m.length===0&&N("removeEventListener"))}const g=[];function X(e){g[g.length-1](e)}function Ke(e){J.is.desktop===!0&&(g.push(e),g.length===1&&document.body.addEventListener("focusin",X))}function U(e){const a=g.indexOf(e);a!==-1&&(g.splice(a,1),g.length===0&&document.body.removeEventListener("focusin",X))}let B=0;const Le={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},G={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},We=q({name:"QDialog",inheritAttrs:!1,props:{...pe,...Ce,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...we,"shake","click","escapeKey"],setup(e,{slots:a,emit:i,attrs:n}){const v=z(),u=P(null),d=P(!1),s=P(!1);let r=null,f=null,w,_;const Q=l(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:D}=Te(),{registerTimeout:H}=Pe(),{registerTick:Y,removeTick:K}=Be(),{transitionProps:Z,transitionStyle:L}=_e(e,()=>G[e.position][0],()=>G[e.position][1]),ee=l(()=>L.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:M,hidePortal:R,portalIsAccessible:te,renderPortal:ne}=Se(v,u,fe,"dialog"),{hide:C}=Ee({showing:d,hideOnRouteChange:Q,handleShow:ue,handleHide:re,processOnMount:!0}),{addToHistory:oe,removeFromHistory:ae}=Fe(d,C,Q),ie=l(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Le[e.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),p=l(()=>d.value===!0&&e.seamless!==!0),se=l(()=>e.autoClose===!0?{onClick:ce}:{}),le=l(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${p.value===!0?"modal":"seamless"}`,n.class]);I(()=>e.maximized,t=>{d.value===!0&&F(t)}),I(p,t=>{D(t),t===!0?(Ke(T),He(E)):(U(T),W(E))});function ue(t){oe(),f=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,F(e.maximized),M(),s.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),Y(k)):K(),H(()=>{if(v.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:o,bottom:h}=document.activeElement.getBoundingClientRect(),{innerHeight:O}=window,$=window.visualViewport!==void 0?window.visualViewport.height:O;o>0&&h>$/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-$,h>=O?1/0:Math.ceil(document.scrollingElement.scrollTop+h-$/2))),document.activeElement.scrollIntoView()}_=!0,u.value.click(),_=!1}M(!0),s.value=!1,i("show",t)},e.transitionDuration)}function re(t){K(),ae(),A(!0),s.value=!0,R(),f!==null&&(((t?.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),H(()=>{R(!0),s.value=!1,i("hide",t)},e.transitionDuration)}function k(t){$e(()=>{let o=u.value;if(o!==null){if(t!==void 0){const h=o.querySelector(t);if(h!==null){h.focus({preventScroll:!0});return}}o.contains(document.activeElement)!==!0&&(o=o.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.querySelector("[autofocus], [data-autofocus]")||o,o.focus({preventScroll:!0}))}})}function S(t){t&&typeof t.focus=="function"?t.focus({preventScroll:!0}):k(),i("shake");const o=u.value;o!==null&&(o.classList.remove("q-animate--scale"),o.classList.add("q-animate--scale"),r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,u.value!==null&&(o.classList.remove("q-animate--scale"),k())},170))}function E(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&S():(i("escapeKey"),C()))}function A(t){r!==null&&(clearTimeout(r),r=null),(t===!0||d.value===!0)&&(F(!1),e.seamless!==!0&&(D(!1),U(T),W(E))),t!==!0&&(f=null)}function F(t){t===!0?w!==!0&&(B<1&&document.body.classList.add("q-body--dialog"),B++,w=!0):w===!0&&(B<2&&document.body.classList.remove("q-body--dialog"),B--,w=!1)}function ce(t){_!==!0&&(C(t),i("click",t))}function de(t){e.persistent!==!0&&e.noBackdropDismiss!==!0?C(t):e.noShake!==!0&&S()}function T(t){e.allowFocusOutside!==!0&&te.value===!0&&ke(u.value,t.target)!==!0&&k('[tabindex]:not([tabindex="-1"])')}Object.assign(v.proxy,{focus:k,shake:S,__updateRefocusTarget(t){f=t||null}}),be(A);function fe(){return c("div",{role:"dialog","aria-modal":p.value===!0?"true":"false",...n,class:le.value},[c(V,{name:"q-transition--fade",appear:!0},()=>p.value===!0?c("div",{class:"q-dialog__backdrop fixed-full",style:ee.value,"aria-hidden":"true",tabindex:-1,onClick:de}):null),c(V,Z.value,()=>d.value===!0?c("div",{ref:u,class:ie.value,style:L.value,tabindex:-1,...se.value},x(a.default)):null)])}return ne}});export{Ie as Q,je as a,Ve as b,We as c,Oe as d,He as e,Ke as f,U as g,W as r};
