import{j as t,k as e,l as a,m as r,n,p as o,q as i,r as s,t as E,v as I,w as c}from"./firebase-vendor-NPot9XFr.js";import{f as l}from"./admin-CFuq7DDa.js";const _={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_HOST:"https://api.mylara.ru/api",VITE_API_DOMAIN:"api.mylara.ru",VITE_API_PORT:"",VITE_API_VERSION:"1",VITE_APP_BASE:"/",VITE_APP_VERSION:"0.1.37",VITE_BUILD_DATE:"05.07.2025 14:23:17",VITE_DARK:"false",VITE_DESCRIPTION:"Инновационная косметика по уходу за лицом от MYLARA. Натуральные ингредиенты и эффективные формулы для вашей красоты.",VITE_DOMAIN:"mylara.ru",VITE_FIREBASE_API_KEY:"AIzaSyCYxI-u9jWIl-obR8FmvOXOh91sYD29toQ",VITE_FIREBASE_APP_ID:"1:890771851225:web:bf606c67130d45fbc3fbc8",VITE_FIREBASE_AUTH_DOMAIN:"mylara-landing.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-JYDX2J8JMZ",VITE_FIREBASE_MESSAGING_SENDER_ID:"890771851225",VITE_FIREBASE_PROJECT_ID:"mylara-landing",VITE_FIREBASE_STORAGE_BUCKET:"mylara-landing.firebasestorage.app",VITE_HTTPS_HOST:"https://api.mylara.ru",VITE_HTTPS_PROTOCOL:"https:",VITE_KEYWORDS:"косметика, уход за лицом, натуральная косметика, MYLARA, красота",VITE_NAME_FULL:"MYLARA",VITE_NAME_FULL_EN:"MYLARA",VITE_NAME_SHORT:"mylara-landing",VITE_ROUTER_BASE:"/",VITE_WS_HOST:"ws://api.mylara.ru",VITE_WS_PROTOCOL:"ws:"},T=(t,e="")=>void 0!==import.meta&&_?_[t]??e:e,m=T("VITE_NAME_FULL","MYLARA");T("VITE_REDIRECT_PATH",""),T("VITE_REDIRECT_PATH_DEV","");const p=T("VITE_DESCRIPTION",""),g=T("VITE_KEYWORDS",""),A=T("VITE_ROUTER_BASE","/");T("VITE_APP_BASE","/"),T("VITE_API_HOST",""),T("VITE_API_BASE_HOST",""),(new Date).getFullYear();const S={NAME:{APP:m,DESCRIPTION:"description",KEYWORDS:"keywords"},KEYWORDS:g,NOSCRIPT:{default:"Это содержимое для браузеров без JS (или с отключенным JS)"},EQUIV:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}},{VITE_NAME_FULL:d,VITE_DESCRIPTION:R,VITE_APP_VERSION:u,VITE_BUILD_DATE:V}={VITE_APP_VERSION:"0.1.37",VITE_BUILD_DATE:"05.07.2025 14:23:17",VITE_DESCRIPTION:"Инновационная косметика по уходу за лицом от MYLARA. Натуральные ингредиенты и эффективные формулы для вашей красоты.",VITE_NAME_FULL:"MYLARA"},y=`${d} | ${R}`,O=R,h=u,P=V,D={title:y,meta:{description:{name:S.NAME.DESCRIPTION,content:R},keywords:{name:S.NAME.KEYWORDS,content:R},robots:{name:"robots",content:"noindex"},equiv:S.EQUIV,noscript:S.NOSCRIPT}},w={apiKey:"AIzaSyCYxI-u9jWIl-obR8FmvOXOh91sYD29toQ",authDomain:"mylara-landing.firebaseapp.com",projectId:"mylara-landing",storageBucket:"mylara-landing.firebasestorage.app",messagingSenderId:"890771851225",appId:"1:890771851225:web:bf606c67130d45fbc3fbc8"};let f,N,b,M;try{f=t(w),N=e(f),b=a(f),M=r(f)}catch(v){}const U=()=>N,B=()=>b,F="undefined"!=typeof window?window.location.origin:"",L={setMeta(t={}){const e=[],a=[],r=t.title??y,n=t.description??O,o=t.keywords??S.KEYWORDS;e.push({name:"description",content:n},{name:"keywords",content:o}),t.robots&&e.push({name:"robots",content:t.robots});const i=t.ogTitle??r,s=t.ogDescription??n,E=t.ogImage?`${F}${t.ogImage}`:`${F}/logo.svg`,I=t.ogUrl??window.location.href;e.push({property:"og:type",content:"website"},{property:"og:title",content:i},{property:"og:description",content:s},{property:"og:image",content:E},{property:"og:url",content:I},{property:"og:site_name",content:S.NAME.APP});const c=t.twitterCard??"summary_large_image",l=t.twitterTitle??r,_=t.twitterDescription??n,T=t.twitterImage?`${F}${t.twitterImage}`:E;return e.push({name:"twitter:card",content:c},{name:"twitter:title",content:l},{name:"twitter:description",content:_},{name:"twitter:image",content:T}),t.canonicalUrl?a.push({rel:"canonical",href:t.canonicalUrl.startsWith("http")?t.canonicalUrl:`${F}${t.canonicalUrl}`}):a.push({rel:"canonical",href:window.location.href}),{title:r,meta:e,link:a}}},C=async()=>l.getCollection("carousel","Не удалось загрузить данные карусели"),Y=async()=>{const t=await l.getCollection("slides","Не удалось загрузить данные слайдов");return{slides:t.items.map((t=>({...t,id:Number(t.id)}))),error:t.error}},$=async()=>{const t=await l.getDocument("slogan","1","Не удалось загрузить данные слогана");return{title:t.data?.title??"",error:t.error}};let K;try{K=r()}catch(v){}const W=new class{storage;constructor(){if(!K)throw new Error("Firebase Storage not initialized");this.storage=K}async uploadImage(t,e={}){try{const a=this.validateImageFile(t,e);if(a)return{error:a};const r=e.filename??this.generateFileName(t),n=`${e.path??"images"}/${r}`,o=s(this.storage,n),i=await E(o,t);return{url:await I(i.ref)}}catch(v){return{error:"Ошибка при загрузке изображения"}}}async uploadImageWithProgress(t,e={},a){try{const r=this.validateImageFile(t,e);if(r)return{error:r};const n=await this.uploadImage(t,e);return a&&n.url&&a({percentage:100,bytesTransferred:t.size,totalBytes:t.size}),n}catch(v){return{error:"Ошибка при загрузке изображения"}}}async deleteImageByUrl(t){try{const e=this.extractPathFromUrl(t);if(!e)return{error:"Невозможно определить путь к файлу"};const a=s(this.storage,e);return await c(a),{}}catch(v){return{error:"Ошибка при удалении изображения"}}}validateImageFile(t,e){const a=e.allowedTypes??["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if(!a.includes(t.type))return`Неподдерживаемый тип файла. Разрешены: ${a.map((t=>t.split("/")[1])).join(", ")}`;const r=e.maxSizeKB??5e3;return t.size/1024>r?`Размер файла слишком большой. Максимум: ${r}KB`:null}generateFileName(t){const e=t.name.split(".").pop()??"jpg";return`${Date.now()}_${Math.random().toString(36).substring(2,10)}.${e}`}extractPathFromUrl(t){try{const e=new URL(t),a=e.pathname.match(/\/o\/(.+)/);return a&&a[1]?decodeURIComponent(a[1]):null}catch{return null}}};export{h as A,P as B,A as R,L as S,g as V,U as a,C as b,Y as c,$ as d,p as e,W as f,B as g,D as m};
