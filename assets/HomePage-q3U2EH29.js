import{d as q,r as h,a as K,y as x,f as l,s as a,K as b,p as n,q as p,L as E,O as Y,F as T,R as Z,v as $,S as G,T as S,B as N,U as J,C as Q,V as P,c as ee,e as k,x as d,z as O,t as te,D as L,A as ae,W as se,X as oe,Y as le,Z as R,$ as re,a0 as ne,a1 as ie,a2 as ce,u as ue,a3 as de}from"./vendor-BWNmmB4S.js";import{S as me,a as ve}from"./seo-constants-JTECMsjv.js";import{firestoreService as A}from"./firestore.service-BB3AMzOw.js";import"./index-BtKOPIne.js";import"./firebase-vendor-CJeZ2BEb.js";const pe={key:0},fe={key:0,class:"q-my-md"},ge={key:0},he={class:"text-h6 q-mt-md text-secondary"},M=q({__name:"DataLoader",props:{error:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyText:{default:"Нет доступных данных"},errorText:{default:"Произошла ошибка при загрузке данных"},loadingText:{default:""},fetchData:{type:Function,default:()=>Promise.resolve({})},dataKey:{default:""}},emits:["retry","data-loaded"],setup(r,{emit:c}){const i=r,_=c,u=h(!1),f=h(""),t=h(null),s=async()=>{u.value=!0,f.value="";try{const e=await i.fetchData();t.value=i.dataKey!==""&&typeof e=="object"&&e!==null?e[i.dataKey]:e,_("data-loaded",t.value)}catch(e){f.value=e instanceof Error?e.message:"Произошла ошибка при загрузке данных"}finally{u.value=!1}},m=()=>{s(),_("retry")};return K(()=>{s()}),(e,w)=>(l(),x(T,null,[a(Y,{showing:e.loading||u.value},{default:n(()=>[p("div",null,[E(e.$slots,"loading",{},()=>[a(Z,{color:"primary",size:"40px"}),e.loadingText?(l(),x("div",pe,$(e.$props.loadingText),1)):b("",!0)])])]),_:3},8,["showing"]),!(e.loading||u.value)&&(e.error||f.value)?(l(),x("div",fe,[E(e.$slots,"error",{},()=>[a(J,{class:"bg-negative text-white",rounded:""},{avatar:n(()=>[a(N,{name:"error"})]),action:n(()=>[a(S,{color:"white",label:"Попробовать снова",flat:"",onClick:m})]),default:n(()=>[G(" "+$(f.value||e.$props.errorText)+" ",1)]),_:1})])])):b("",!0),!(e.loading||u.value)&&!(e.error||f.value)?(l(),x(T,{key:1},[!e.$props.isEmpty&&(t.value||e.$slots.content)?E(e.$slots,"content",{key:0,data:t.value},()=>[t.value?(l(),x("div",ge,$(t.value),1)):b("",!0)]):E(e.$slots,"empty",{key:1},()=>[a(Q,{class:"q-pa-md"},{default:n(()=>[a(N,{color:"grey-6",name:"o_info",size:"4em"}),p("div",he,$(e.$props.emptyText),1),a(S,{class:"q-mt-md",color:"primary",label:"Обновить",outline:"",onClick:m})]),_:1})])],64)):b("",!0)],64))}}),ye=()=>{const r=P();return{isMobile:ee(()=>r.screen.lt.sm)}};function U(){const r=h(new Set),c=(t,s="/logo.svg")=>{const m=t.target,e=m.src;console.warn("Failed to load image:",e),r.value.add(e),m.src!==s&&(m.src=s,m.alt="Изображение недоступно",m.classList.add("fallback-image"))},i=t=>{const s=t.target;s.setAttribute("data-loaded","true"),s.classList.remove("fallback-image")},_=t=>r.value.has(t);return{failedImages:r,handleImageError:c,handleImageLoad:i,isImageFailed:_,getSafeImageSrc:(t,s="/logo.svg")=>_(t)?s:t,clearFailedImages:()=>{r.value.clear()}}}const _e=async()=>A.getCollection("carousel","Не удалось загрузить данные карусели"),be={class:"carousel-wrapper relative-position"},ke=["onTouchend"],xe=["src"],$e={class:"text-label text-subtitle2 q-mb-sm"},Se={class:"btn-more"},we={class:"text-body1"},Ce=["innerHTML"],Ie={class:"text-caption text-grey-6"},Te=q({__name:"LandingCarousel",setup(r){const{isMobile:c}=ye(),{handleImageError:i,handleImageLoad:_}=U(),u=h(0),f=h(!1),t=h(null),s=h(null),m=h(null),e=h(),w=h(),V=({id:v,img:g,label:o,link:y,info:C})=>{t.value={id:v,img:g,label:o,link:y,info:C},f.value=!0,m.value=v},B=v=>{u.value<v.length-1&&(u.value++,H())},F=()=>{u.value>0&&(u.value--,H())},H=()=>{const v=document.querySelector(".carousel-items-container"),o=document.querySelectorAll(".carousel-card-container")[u.value];if(v&&o){const y=o.clientWidth;v.scrollTo({left:y*u.value,behavior:"smooth"})}},W=v=>{e.value=v?.touches[0]?.clientX},j=(v,g)=>{if(v.changedTouches&&v.changedTouches.length>0){w.value=v?.changedTouches[0]?.clientX;const o=e.value-w.value;Math.abs(o)>50&&(o>0?B(g):F())}};return K(()=>{s.value&&s.value.addEventListener("touchstart",W,{passive:!0})}),(v,g)=>(l(),x(T,null,[a(M,{"fetch-data":d(_e),"data-key":"items"},{content:n(({data:o})=>[p("div",be,[d(c)?b("",!0):(l(),k(S,{key:0,disable:u.value===0,class:"carousel-nav-btn carousel-prev-btn",color:"primary",icon:"chevron_left",round:"",onClick:F},null,8,["disable"])),p("div",{ref_key:"carouselRef",ref:s,class:"carousel-items-container q-py-lg q-my-sm",onTouchend:y=>j(y,Array.isArray(o)?o:[])},[(l(!0),x(T,null,O(Array.isArray(o)?o:[],({id:y,img:C,label:D,link:X,info:z})=>(l(),x("div",{key:y,class:"carousel-card-container"},[a(Q,{class:R([[{active:m.value===y}],"cursor-pointer my-card carousel-item-card"]),onClick:I=>V({id:y,img:C,label:D,link:X,info:z})},{default:n(()=>[p("img",{src:C,style:{width:"100%","aspect-ratio":"3/4","object-fit":"cover"},onError:g[0]||(g[0]=(...I)=>d(i)&&d(i)(...I)),onLoad:g[1]||(g[1]=(...I)=>d(_)&&d(_)(...I))},null,40,xe),a(L,{class:"description-wrapper text-center q-pb-sm"},{default:n(()=>[p("div",$e,$(D),1),p("div",Se,[a(S,{class:"more-details-btn",color:"primary","icon-right":"arrow_forward",label:"Подробнее",size:"sm","no-caps":"",outline:"",onClick:re(I=>V({id:y,img:C,label:D,link:X,info:z}),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class","onClick"])]))),128))],40,ke),d(c)?b("",!0):(l(),k(S,{key:1,disable:u.value===(Array.isArray(o)?o.length:0)-1,class:"carousel-nav-btn carousel-next-btn",color:"primary",icon:"chevron_right",round:"",onClick:y=>B(Array.isArray(o)?o:[])},null,8,["disable","onClick"]))])]),_:1},8,["fetch-data"]),a(le,{modelValue:f.value,"onUpdate:modelValue":g[2]||(g[2]=o=>f.value=o),onHide:g[3]||(g[3]=o=>m.value=null)},{default:n(()=>[t.value?(l(),k(Q,{key:0,style:{width:"clamp(300px, 50vw, 600px)"}},{default:n(()=>[a(te,{src:t.value.img,fit:"cover",onError:d(i)},null,8,["src","onError"]),t.value.label?(l(),k(L,{key:0},{default:n(()=>[p("div",we,$(t.value.label),1)]),_:1})):b("",!0),t.value.info?(l(),k(L,{key:1,class:"q-pt-none"},{default:n(()=>[p("div",{class:"text-body2 text-grey-7",innerHTML:t.value.info},null,8,Ce),a(ae,{class:"q-my-md"}),p("div",Ie," ID элемента: "+$(t.value.id),1)]),_:1})):b("",!0),t.value.link?(l(),k(L,{key:2,class:"q-pt-none"},{default:n(()=>[a(S,{href:t.value.link,color:"primary",icon:"open_in_new",label:"Перейти",target:"_blank",outline:""},null,8,["href"])]),_:1})):b("",!0),a(se,{align:"right"},{default:n(()=>[oe(a(S,{color:"primary",label:"Закрыть",flat:""},null,512),[[ne]])]),_:1})]),_:1})):b("",!0)]),_:1},8,["modelValue"])],64))}}),qe=async()=>{const r=await A.getCollection("slides","Не удалось загрузить данные слайдов");return{slides:r.items.map(i=>({...i,id:Number(i.id)})),error:r.error}},Ee={class:"absolute-bottom custom-caption"},Le={class:"text-h2"},De={class:"text-subtitle1"},Qe=q({__name:"LandingSlider",setup(r){const c=P(),i=h(1),{getSafeImageSrc:_}=U();return(u,f)=>(l(),k(M,{"fetch-data":d(qe),"data-key":"slides"},{content:n(({data:t})=>[a(ie,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=s=>i.value=s),class:R([{"height-xs":d(c).screen.xs,"height-sm":d(c).screen.sm,"height-md":d(c).screen.md,"height-lg":d(c).screen.lg||d(c).screen.xl},"bg-white text-white"]),"transition-next":"slide-left","transition-prev":"slide-right",animated:"",arrows:"",autoplay:"",infinite:"",swipeable:""},{default:n(()=>[(l(!0),x(T,null,O(t||[],({id:s,img:m,title:e,subtitle:w})=>(l(),k(ce,{key:s,"img-src":d(_)(m),name:s},{default:n(()=>[p("div",Ee,[p("div",Le,$(e),1),p("div",De,$(w),1)])]),_:2},1032,["img-src","name"]))),128))]),_:2},1032,["modelValue","class"])]),_:1},8,["fetch-data"]))}}),Ae=async()=>{const r=await A.getDocument("slogan","1","Не удалось загрузить данные слогана");return{title:r.data?.title??"",error:r.error}},Me=q({__name:"LandingSlogan",setup(r){return(c,i)=>(l(),k(M,{"fetch-data":d(Ae),"is-empty":!1,"data-key":"title"},null,8,["fetch-data"]))}}),Ve={class:"q-mx-auto q-pt-xl q-px-md",style:{"max-width":"1200px"}},Ne=q({__name:"HomePage",setup(r){return ue(()=>me.setMeta(ve)),(c,i)=>(l(),k(de,null,{default:n(()=>[a(Qe),p("div",Ve,[a(Me)]),a(Te)]),_:1}))}});export{Ne as default};
