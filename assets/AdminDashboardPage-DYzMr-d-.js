import{d as x,r as C,a as w,$ as k,e as c,q as d,a5 as q,a6 as D,f as o,x as r,H as p,J as Q,I as $,G as f,y as P,t as S,s as g,v as B,K as R,F as v,aj as y,ab as A}from"./vendor-DNS0pCPF.js";import{g as F}from"./admin-config.service-D0X7YxHh.js";import{firestoreService as z}from"./firestore.service-CRKW9MBa.js";import"./firebase-vendor-D5LM7ulE.js";import"./index-B-W82EtG.js";function I(a){const n=a%10,l=a%100;return l>=11&&l<=14?"записей":n===1?"запись":n>=2&&n<=4?"записи":"записей"}function L(a){return`${a} ${I(a)}`}const N={class:"row q-gutter-md"},T={class:"text-h6"},V={class:"text-body2 text-grey-6 q-mb-sm"},j={class:"q-mt-md"},M=x({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup(a){const n=k(),l=D(),u=F(),m=C({});w(async()=>{await _()});async function _(){try{const s=u.map(async e=>{const i=await z.getCollection(e.name);return{name:e.name,count:i.items.length}}),t=await Promise.all(s);m.value=t.reduce((e,i)=>(e[i.name]=i.count,e),{})}catch(s){console.error("Ошибка загрузки статистики коллекций:",s),n.notify({type:"negative",message:"Ошибка загрузки статистики",position:"top"})}}function b(s){const t=["primary","secondary","accent","positive","negative","info","warning"],e=s.length%t.length;return t[e]??"primary"}function h(s){l.push(`/admin/collection/${s}`)}return(s,t)=>(o(),c(q,{class:"q-pa-md"},{default:d(()=>[t[0]||(t[0]=r("div",{class:"text-h4 q-mb-md"},"Панель администратора",-1)),t[1]||(t[1]=r("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),r("div",N,[(o(!0),p(Q,null,$(f(u),e=>(o(),p("div",{key:e.name,class:"col-12 col-sm-6 col-md-3"},[P((o(),c(S,{class:"admin-dashboard__card cursor-pointer",clickable:"",onClick:i=>h(e.name)},{default:d(()=>[g(B,{class:"text-center"},{default:d(()=>[g(R,{name:e.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),r("div",T,v(e.label),1),r("div",V," Управление записями "+v(e.label.toLowerCase()),1),r("div",j,[m.value[e.name]!==void 0?(o(),c(y,{key:0,color:b(e.name),label:f(L)(m.value[e.name]??0),"text-color":"white",dense:""},null,8,["color","label"])):(o(),c(y,{key:1,color:"grey-5",label:"Загрузка...","text-color":"white",dense:""}))])]),_:2},1024)]),_:2},1032,["onClick"])),[[A]])]))),128))])]),_:1,__:[0,1]}))}});export{M as default};
