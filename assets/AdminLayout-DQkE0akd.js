import{d as b,a6 as I,c as B,V as D,f as r,e as p,a7 as x,p as t,q as e,L as N,a8 as k,a9 as h,J as c,x as f,aa as R,a1 as S,R as T,r as q,w as E,b as H,A as M,z as P,D as g,E as $,s as F,K as Q,ab as O,y as m,ac as U,ad as z,ae as J,H as K,S as W,af as j,B as G,C as X}from"./vendor-CZl8qdfD.js";import{u as Y,b as Z}from"./index-O5WQvQvg.js";import{g as ee}from"./admin-config.service-PhUJWde6.js";import"./firebase-vendor-DtqfmKDn.js";const y=b({name:"AdminMenuItem",__name:"AdminMenuItem",props:{title:{},icon:{},link:{}},setup(_){const a=_,o=I(),u=B(()=>a.link==="/"&&o.path==="/"?!0:a.link.includes("/admin/collection/")?o.path===a.link:o.path.startsWith(a.link)&&a.link!=="/");return(l,v)=>D((r(),p(x,{active:u.value,to:l.link,"active-class":"text-primary bg-grey-2",clickable:""},{default:t(()=>[e(k,{avatar:""},{default:t(()=>[e(N,{name:l.icon},null,8,["name"])]),_:1}),e(k,null,{default:t(()=>[e(h,null,{default:t(()=>[c(f(l.title),1)]),_:1})]),_:1})]),_:1},8,["active","to"])),[[R]])}}),te={key:0,class:"q-mr-md text-caption"},ae={class:"q-ml-md"},ie=b({name:"AdminLayout",__name:"AdminLayout",setup(_){const a=S(),o=T(),{currentUser:u,isAuthenticated:l,logout:v}=Y(),d=q(!1),w=Z,A=ee();E(()=>l.value,i=>{i||a.push("/admin/login")},{immediate:!0});function L(){d.value=!d.value}async function C(){const i=await v();i.success?(o.notify({type:"positive",message:"Выход выполнен успешно",position:"top"}),a.push("/admin/login")):o.notify({type:"negative",message:i.error??"Произошла ошибка при выходе",position:"top"})}return(i,n)=>{const V=H("router-view");return r(),p(X,{view:"lHh Lpr lFf"},{default:t(()=>[e(M,{elevated:""},{default:t(()=>[e(P,null,{default:t(()=>[e(Q,{"aria-label":"Menu",icon:"menu",dense:"",flat:"",round:"",onClick:L}),e(O,null,{default:t(()=>n[1]||(n[1]=[c(" Админка ")])),_:1,__:[1]}),m(u)?(r(),g("div",te,f(m(u).email),1)):$("",!0),e(Q,{icon:"logout",dense:"",flat:"",round:"",onClick:C},{default:t(()=>[e(U,null,{default:t(()=>n[2]||(n[2]=[c("Выйти")])),_:1,__:[2]})]),_:1}),F("div",ae," Версия "+f(m(w)),1)]),_:1})]),_:1}),e(z,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=s=>d.value=s),bordered:"","show-if-above":""},{default:t(()=>[e(J,null,{default:t(()=>[e(h,{header:""},{default:t(()=>n[3]||(n[3]=[c(" Управление данными ")])),_:1,__:[3]}),(r(!0),g(K,null,W(m(A),s=>(r(),p(y,{key:s.name,icon:s.icon,link:`/admin/collection/${s.name}`,title:s.label},null,8,["icon","link","title"]))),128)),e(j),e(y,{icon:"home",link:"/",title:"На главную"})]),_:1})]),_:1},8,["modelValue"]),e(G,null,{default:t(()=>[e(V)]),_:1})]),_:1})}}});export{ie as default};
