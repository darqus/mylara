import{d as N,aa as R,c as b,y as w,ab as M,e as _,f as d,ac as S,a0 as V,q as t,s as e,K as E,ad as I,ae as h,Y as p,F as v,r as x,w as B,T as P,a6 as q,$ as F,b as $,R as H,O as U,H as A,U as G,x as X,A as O,af as z,G as l,ag as J,ah as K,ai as W,B as y,J as Y,I as j,S as Z}from"./vendor-DNS0pCPF.js";import{R as a,u as ee,b as te}from"./index-BgACgv9l.js";import{g as ae}from"./admin-config.service-D0X7YxHh.js";import"./firebase-vendor-D5LM7ulE.js";const f=N({name:"AdminMenuItem",__name:"AdminMenuItem",props:{title:{},icon:{},link:{}},setup(g){const n=g,i=R(),r=b(()=>n.link===String(a.ROOT)&&i.path===String(a.ROOT)||n.link===String(a.ADMIN)&&i.path===String(a.ADMIN)?!0:n.link.includes(a.ADMIN_COLLECTION_PREFIX)?i.path===n.link:n.link!==String(a.ROOT)&&n.link!==String(a.ADMIN)?i.path.startsWith(n.link):!1);return(u,k)=>w((d(),_(S,{active:r.value,class:V([{"admin-menu-item--active":r.value},"admin-menu-item"]),to:u.link,"active-class":"text-primary bg-primary-1",clickable:""},{default:t(()=>[e(I,{avatar:""},{default:t(()=>[e(E,{name:u.icon},null,8,["name"])]),_:1}),e(I,null,{default:t(()=>[e(h,null,{default:t(()=>[p(v(u.title),1)]),_:1})]),_:1})]),_:1},8,["active","class","to"])),[[M]])}}),ne={key:0,class:"q-mr-md text-caption"},se={class:"q-ml-md"},ue=N({name:"AdminLayout",__name:"AdminLayout",setup(g){const n=q(),i=F(),{currentUser:r,isAuthenticated:u,logout:k}=ee(),c=x(!1),L=te,Q=ae();B(()=>u.value,m=>{m||n.push(a.ADMIN_LOGIN)},{immediate:!0});function T(){c.value=!c.value}async function C(){const m=await k();m.success?(i.notify({type:"positive",message:"Выход выполнен успешно",position:"top"}),n.push(a.ADMIN_LOGIN)):i.notify({type:"negative",message:m.error??"Произошла ошибка при выходе",position:"top"})}return(m,s)=>{const D=$("router-view");return d(),_(P,{view:"lHh Lpr lFf"},{default:t(()=>[e(H,{elevated:""},{default:t(()=>[e(U,null,{default:t(()=>[e(O,{"aria-label":"Menu",icon:"menu",dense:"",flat:"",round:"",onClick:T}),e(z,null,{default:t(()=>s[1]||(s[1]=[p("Админка")])),_:1,__:[1]}),l(r)?(d(),A("div",ne,v(l(r).email),1)):G("",!0),e(O,{icon:"logout",dense:"",flat:"",round:"",onClick:C},{default:t(()=>[e(J,null,{default:t(()=>s[2]||(s[2]=[p("Выйти")])),_:1,__:[2]})]),_:1}),X("div",se,"Версия "+v(l(L)),1)]),_:1})]),_:1}),e(K,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),color:"primary",style:{"border-right":"1px solid var(--q-primary)"},"show-if-above":""},{default:t(()=>[e(W,null,{default:t(()=>[e(h,{header:""},{default:t(()=>s[3]||(s[3]=[p("Управление данными")])),_:1,__:[3]}),e(f,{link:l(a).ADMIN,icon:"o_settings",title:"На главную Админки"},null,8,["link"]),e(y),(d(!0),A(Y,null,j(l(Q),o=>(d(),_(f,{key:o.name,icon:o.icon,link:`${l(a).ADMIN_COLLECTION_PREFIX}${o.name}`,title:o.label},null,8,["icon","link","title"]))),128)),e(y),e(f,{link:l(a).ROOT,icon:"o_home",title:"На главную Лендинга"},null,8,["link"])]),_:1})]),_:1},8,["modelValue"]),e(Z,null,{default:t(()=>[e(D)]),_:1})]),_:1})}}});export{ue as default};
