import{d as $,R as P,a1 as S,r as g,a as A,e as p,f as i,p as n,s as o,q as a,D as x,H as B,S as R,y as _,V as I,P as w,T as y,L,x as h,ag as k,aa as N,af as T,K as f,W as U,a4 as z,U as F,a0 as E}from"./vendor-CZl8qdfD.js";import{g as H}from"./admin-config.service-PhUJWde6.js";import{f as K}from"./firestore.service-BdR6RSrq.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./firebase-vendor-DtqfmKDn.js";import"./index-O5WQvQvg.js";function W(r){const s=r%10,c=r%100;return c>=11&&c<=14?"записей":s===1?"запись":s>=2&&s<=4?"записи":"записей"}function j(r){return`${r} ${W(r)}`}const G={class:"row q-gutter-md"},J={class:"text-h6"},O={class:"text-body2 text-grey-6 q-mb-sm"},X={class:"q-mt-md"},Y={class:"row q-gutter-md"},Z=$({name:"AdminDashboardPage",__name:"AdminDashboardPage",setup(r){const s=P(),c=S(),C=H(),d=g(!1),m=g(""),v=g({});A(async()=>{await b()});async function b(){try{const l=C.map(async e=>{const u=await K.getCollection(e.name);return{name:e.name,count:u.items.length}}),t=await Promise.all(l);v.value=t.reduce((e,u)=>(e[u.name]=u.count,e),{})}catch(l){console.error("Ошибка загрузки статистики коллекций:",l),s.notify({type:"negative",message:"Ошибка загрузки статистики",position:"top"})}}function q(l){const t=["primary","secondary","accent","positive","negative","info","warning"],e=l.length%t.length;return t[e]??"primary"}function D(l){c.push(`/admin/collection/${l}`)}function Q(){b(),s.notify({type:"positive",message:"Данные обновлены",position:"top"})}function V(){if(!m.value.trim()){s.notify({type:"negative",message:"Введите название коллекции",position:"top"});return}s.notify({type:"info",message:`Создание коллекции "${m.value}" (в разработке)`,position:"top"}),d.value=!1,m.value=""}return(l,t)=>(i(),p(E,{class:"q-pa-md"},{default:n(()=>[t[5]||(t[5]=o("div",{class:"text-h4 q-mb-md"}," Панель администратора ",-1)),t[6]||(t[6]=o("div",{class:"text-subtitle1 q-mb-lg text-grey-7"}," Добро пожаловать в админку для управления базой данных ",-1)),o("div",G,[(i(!0),x(B,null,R(_(C),e=>(i(),x("div",{key:e.name,class:"col-12 col-sm-6 col-md-3"},[I((i(),p(w,{class:"admin-card cursor-pointer",clickable:"",onClick:u=>D(e.name)},{default:n(()=>[a(y,{class:"text-center"},{default:n(()=>[a(L,{name:e.icon,class:"q-mb-md",color:"primary",size:"48px"},null,8,["name"]),o("div",J,h(e.label),1),o("div",O," Управление записями "+h(e.label.toLowerCase()),1),o("div",X,[v.value[e.name]!==void 0?(i(),p(k,{key:0,color:q(e.name),label:_(j)(v.value[e.name]??0),"text-color":"white",dense:""},null,8,["color","label"])):(i(),p(k,{key:1,color:"grey-5",label:"Загрузка...","text-color":"white",dense:""}))])]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])]))),128))]),a(T,{class:"q-my-lg"}),t[7]||(t[7]=o("div",{class:"text-h6 q-mb-md"}," Быстрые действия ",-1)),o("div",Y,[a(f,{color:"primary",icon:"add",label:"Создать коллекцию",onClick:t[0]||(t[0]=e=>d.value=!0)}),a(f,{color:"secondary",icon:"refresh",label:"Обновить данные",onClick:Q})]),a(U,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e)},{default:n(()=>[a(w,{style:{"min-width":"400px"}},{default:n(()=>[a(y,null,{default:n(()=>t[4]||(t[4]=[o("div",{class:"text-h6"}," Создать новую коллекцию ",-1)])),_:1,__:[4]}),a(y,{class:"q-pt-none"},{default:n(()=>[a(z,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),label:"Название коллекции",placeholder:"Введите название коллекции",filled:""},null,8,["modelValue"])]),_:1}),a(F,{align:"right",class:"text-primary"},{default:n(()=>[a(f,{label:"Отмена",flat:"",onClick:t[2]||(t[2]=e=>d.value=!1)}),a(f,{label:"Создать",flat:"",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[5,6,7]}))}}),ne=M(Z,[["__scopeId","data-v-4aa8ae1e"]]);export{ne as default};
